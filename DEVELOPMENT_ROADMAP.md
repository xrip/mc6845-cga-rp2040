Yt# –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞ CGA Video Adapter

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (—Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è v2.0)

### –û—Å–Ω–æ–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ MC6845 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (main.c)
- ‚úÖ PIO-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–∞–∫—Ç–æ–≤–æ–π —á–∞—Å—Ç–æ—Ç—ã (clock_pio.h)
- ‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è 3 —Ä–µ–∂–∏–º–æ–≤:
  - character.pld (—Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º - —Ç–∞–π–º–∏–Ω–≥–∏)
  - attribute.pld (—Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º - —Ü–≤–µ—Ç–∞)
  - graphics.pld (–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º 320x200x4)
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Character ROM (rom.h —Å 8x8 —à—Ä–∏—Ñ—Ç–∞–º–∏)
- ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞—è —ç–º—É–ª—è—Ü–∏—è –≤–∏–¥–µ–æ–ø–∞–º—è—Ç–∏ —Å –≤—ã–≤–æ–¥–æ–º –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–ø–æ–∑–∏—Ç–Ω–æ–≥–æ –≤–∏–¥–µ–æ–≤—ã—Ö–æ–¥–∞
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–µ–∫—Å—Ç–æ–≤—ã–º –∏ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º —Ä–µ–∂–∏–º–∞–º–∏

### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ v2.0
- ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–π –≤—ã–≤–æ–¥ –ø–∏–∫—Å–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ (Text ROM + Character ROM)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ü–≤–µ—Ç–æ–≤—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (Attribute ROM —ç–º—É–ª—è—Ü–∏—è)
- ‚úÖ –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º —Å –ø—Ä—è–º—ã–º –≤—ã–≤–æ–¥–æ–º –¥–∞–Ω–Ω—ã—Ö (–±–µ–∑ —É—á–µ—Ç–∞ RA)
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ —á–µ—Ä–µ–∑ USB
- ‚úÖ –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∞–¥—Ä–µ—Å–æ–≤ MA/RA
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞ (v2.1)** - —É–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –æ–±—ä–µ–º–∞ –Ω–∞ ~50%

## üîÑ –≠—Ç–∞–ø 2: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### 2.1 USB-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –≤—ã—Å–æ–∫–∏–π)
- [ ] **–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ USB**
  - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ text_buffer
  - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ .txt
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–æ–∫ (ASCII, CP866)

- [ ] **–ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∏ —á–µ—Ä–µ–∑ USB**
  - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ graphics_buffer
  - –ó–∞–≥—Ä—É–∑–∫–∞ –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - –ü—Ä–æ—Å—Ç–æ–π —Ñ–æ—Ä–º–∞—Ç: 320x200, 4 —Ü–≤–µ—Ç–∞

- [ ] **–ó–∞–≥—Ä—É–∑–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤**
  - –ó–∞–º–µ–Ω–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ rom.h
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤
  - –ó–∞–≥—Ä—É–∑–∫–∞ .fnt —Ñ–∞–π–ª–æ–≤

### 2.2 –£–ª—É—á—à–µ–Ω–∏–µ –≤–∏–¥–µ–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Å—Ä–µ–¥–Ω–∏–π)
- [ ] **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ä–µ–∂–∏–º—ã**
  - 640x200 –º–æ–Ω–æ—Ö—Ä–æ–º
  - 160x200x16 —Ü–≤–µ—Ç–æ–≤
  - –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º—ã–µ –ø–∞–ª–∏—Ç—Ä—ã

- [ ] **–ê–Ω–∏–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã**
  - –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
  - –ú–∏–≥–∞—é—â–∏–π –∫—É—Ä—Å–æ—Ä
  - –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏

- [ ] **–î–≤–æ–π–Ω–∞—è –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è**
  - –ò–∑–±–µ–∂–∞–Ω–∏–µ –º–µ—Ä—Ü–∞–Ω–∏—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑–≤–µ—Ä—Ç–∫–æ–π

### 2.3 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Å—Ä–µ–¥–Ω–∏–π)
- [ ] **DMA –¥–ª—è –≤–∏–¥–µ–æ–¥–∞–Ω–Ω—ã—Ö**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥ –±–µ–∑ —É—á–∞—Å—Ç–∏—è CPU
  - –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫

- [ ] **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**
  - –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
  - –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–æ–∫

## üöÄ –≠—Ç–∞–ø 3: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 3.1 –°–µ—Ç–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –Ω–∏–∑–∫–∏–π)
- [ ] **Wi-Fi –º–æ–¥—É–ª—å**
  - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ —Å–µ—Ç–∏
  - –£–¥–∞–ª–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
  - Web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 3.2 –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –Ω–∏–∑–∫–∏–π)
- [ ] **SD-–∫–∞—Ä—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞**
  - –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —Ç–µ–∫—Å—Ç–æ–≤
  - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### 3.3 –ê—É–¥–∏–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –Ω–∏–∑–∫–∏–π)
- [ ] **PC Speaker —ç–º—É–ª—è—Ü–∏—è**
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–≤—É–∫–æ–≤
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–∏–¥–µ–æ

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### GPIO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- [ ] **–†–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–∏–Ω–æ–≤**
  - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π
  - –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] **–°—Ö–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**
  - –ü–æ–ª–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω—ã–µ —Å—Ö–µ–º—ã
  - PCB –¥–∏–∑–∞–π–Ω –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞

- [ ] **–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
  - API –¥–ª—è USB –∫–æ–º–∞–Ω–¥
  - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  - Troubleshooting guide

## üìã –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ù–µ–¥–µ–ª—è 1-2: USB-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ–∫—Å—Ç–∞
2. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
3. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±–º–µ–Ω–∞

### –ù–µ–¥–µ–ª—è 3-4: –£–ª—É—á—à–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å GPIO –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
2. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
3. –£–ª—É—á—à–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

### –ù–µ–¥–µ–ª—è 5-6: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ä–µ–∂–∏–º—ã
1. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ä–µ–∂–∏–º—ã
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º—ã–µ –ø–∞–ª–∏—Ç—Ä—ã
3. –î–æ–±–∞–≤–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã –∞–Ω–∏–º–∞—Ü–∏–∏

## üéØ –ó–∞–≤–µ—Ä—à–µ–Ω–æ –≤ v2.1 (–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞)

### ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   - ‚úÖ –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ process_video_address() 
   - ‚úÖ –£–±—Ä–∞–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
   - ‚úÖ –£–ø—Ä–æ—â–µ–Ω –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏

2. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**
   - ‚úÖ –û–±—ä–µ–¥–∏–Ω–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è GPIO –≤ –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é
   - ‚úÖ –£–±—Ä–∞–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤
   - ‚úÖ –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –≤—ã–≤–æ–¥ –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - ‚úÖ –ö–æ–¥ —Å–æ–∫—Ä–∞—â–µ–Ω —Å 400+ –¥–æ ~200 —Å—Ç—Ä–æ–∫

3. **–£–ª—É—á—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏**
   - ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ main loop
   - ‚úÖ –ü—Ä—è–º–æ–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
   - ‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ USB

## üéØ –°–ª–µ–¥—É—é—â–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞
1. **–ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å GPIO –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π
   - –£–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–∏–Ω–æ–≤
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ–≤—ã—Ö–æ–¥–∞

2. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**
   - –ë–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ–ø–∞–º—è—Ç–∏